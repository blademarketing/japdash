<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Trigger Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-lg shadow-lg p-6">
            <!-- Tab Navigation -->
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">Social Trigger</h1>
                    <p class="text-gray-600 text-sm mb-4">Intelligent social media automation platform</p>
                    <div class="flex gap-4">
                        <button id="accountsTab" class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600">
                            <i class="fas fa-users mr-2"></i>Accounts
                        </button>
                        <button id="historyTab" class="px-4 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700">
                            <i class="fas fa-history mr-2"></i>History
                        </button>
                        <button id="logsTab" class="px-4 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700">
                            <i class="fas fa-file-alt mr-2"></i>Logs
                        </button>
                        <button id="settingsTab" class="px-4 py-2 text-sm font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700">
                            <i class="fas fa-cog mr-2"></i>Settings
                        </button>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button id="quickExecuteBtn" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                        <i class="fas fa-bolt"></i>
                        Quick Execute
                    </button>
                    <button id="addBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                        <i class="fas fa-plus"></i>
                        Add Account
                    </button>
                    <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </button>
                </div>
            </div>

            <!-- Accounts Tab Content -->
            <div id="accountsContent">
                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">Social Media Accounts</h2>
                    <p class="text-gray-600 text-sm">Manage your connected social media accounts and configure automated post triggers</p>
                </div>
                <!-- Account Table -->
                <div class="overflow-x-auto">
                    <table class="w-full table-auto">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">Platform</th>
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">Username</th>
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">Display Name</th>
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">URL</th>
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">RSS Status</th>
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">Enabled</th>
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">Post Triggers</th>
                                <th class="px-4 py-3 text-left text-gray-600 font-medium">Management</th>
                            </tr>
                        </thead>
                        <tbody id="accountsTable" class="divide-y divide-gray-200">
                            <!-- Accounts will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="hidden text-center py-12">
                    <i class="fas fa-users-slash text-gray-400 text-6xl mb-4"></i>
                    <h3 class="text-xl text-gray-600 mb-2">No accounts found</h3>
                    <p class="text-gray-500 mb-4">Start by adding your first social media account</p>
                    <button class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors">
                        Add Account
                    </button>
                </div>
            </div>

            <!-- History Tab Content -->
            <div id="historyContent" class="hidden">
                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">Execution History</h2>
                    <p class="text-gray-600 text-sm">View and analyze your automated actions, orders, and campaign performance</p>
                </div>
                <!-- Filters -->
                <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <h3 class="font-semibold mb-3">Filters</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Execution Type</label>
                            <select id="filterExecutionType" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md">
                                <option value="">All Types</option>
                                <option value="instant">Instant</option>
                                <option value="rss_trigger">RSS Trigger</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Platform</label>
                            <select id="filterPlatform" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md">
                                <option value="">All Platforms</option>
                                <option value="Instagram">Instagram</option>
                                <option value="Facebook">Facebook</option>
                                <option value="X">X</option>
                                <option value="TikTok">TikTok</option>
                                <option value="YouTube">YouTube</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                            <select id="filterStatus" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md">
                                <option value="">All Statuses</option>
                                <option value="pending">Pending</option>
                                <option value="in_progress">In Progress</option>
                                <option value="completed">Completed</option>
                                <option value="partial">Partial</option>
                                <option value="canceled">Canceled</option>
                            </select>
                        </div>
                        <div class="flex items-end gap-2">
                            <button id="applyFilters" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm transition-colors">
                                Apply Filters
                            </button>
                            <button id="refreshAllBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-sm transition-colors">
                                <i class="fas fa-sync mr-1"></i>Refresh All
                            </button>
                        </div>
                    </div>
                </div>

                <!-- History Stats -->
                <div id="historyStats" class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Stats will be loaded here -->
                </div>

                <!-- History Table -->
                <div class="overflow-x-auto">
                    <table class="w-full table-auto text-sm">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Order ID</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Type</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Platform</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Account</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Service</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Target</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Quantity</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Cost</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Status</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Date</th>
                                <th class="px-3 py-2 text-left text-gray-600 font-medium">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="historyTable" class="divide-y divide-gray-200">
                            <!-- History will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Empty History State -->
                <div id="emptyHistoryState" class="hidden text-center py-12">
                    <i class="fas fa-history text-gray-400 text-6xl mb-4"></i>
                    <h3 class="text-xl text-gray-600 mb-2">No executions found</h3>
                    <p class="text-gray-500 mb-4">Execute some actions to see them here</p>
                </div>

                <!-- Pagination -->
                <div id="historyPagination" class="mt-6 flex justify-between items-center">
                    <div class="text-sm text-gray-600">
                        Showing <span id="historyStart">0</span>-<span id="historyEnd">0</span> of <span id="historyTotal">0</span> results
                    </div>
                    <div class="flex gap-2">
                        <button id="historyPrevBtn" class="px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50" disabled>
                            Previous
                        </button>
                        <button id="historyNextBtn" class="px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50" disabled>
                            Next
                        </button>
                    </div>
                </div>
            </div>

            <!-- Logs Tab Content -->
            <div id="logsContent" class="hidden">
                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">System Logs & Monitoring</h2>
                    <p class="text-gray-600 text-sm">Monitor RSS polling activity, system events, and real-time application logs</p>
                </div>
                <!-- RSS Service Status -->
                <div class="mb-6 p-4 bg-blue-50 rounded-lg border">
                    <div class="flex justify-between items-center">
                        <div>
                            <h3 class="font-semibold text-blue-800">RSS Polling Service</h3>
                            <p id="rssServiceStatus" class="text-sm text-blue-600">Always running - polls every 15 minutes</p>
                            <p class="text-xs text-blue-500 mt-1">Only enabled accounts with RSS feeds and configured actions are monitored</p>
                        </div>
                        <div class="flex gap-2">
                            <button id="pollNowBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors">
                                <i class="fas fa-sync mr-1"></i>Poll Now
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Console Filters -->
                <div class="mb-4 p-3 bg-gray-800 rounded-t-lg">
                    <div class="flex flex-wrap gap-3 items-center">
                        <span class="text-green-400 font-mono text-sm">$ filters:</span>
                        <div class="flex gap-2">
                            <button id="filterAll" class="px-3 py-1 text-xs bg-green-600 text-white rounded font-mono hover:bg-green-700">ALL</button>
                            <button id="filterRSS" class="px-3 py-1 text-xs bg-gray-700 text-green-400 rounded font-mono hover:bg-gray-600">RSS</button>
                            <button id="filterExecution" class="px-3 py-1 text-xs bg-gray-700 text-green-400 rounded font-mono hover:bg-gray-600">EXEC</button>
                            <button id="filterAccount" class="px-3 py-1 text-xs bg-gray-700 text-green-400 rounded font-mono hover:bg-gray-600">ACCT</button>
                        </div>
                        <div class="flex gap-2 ml-auto">
                            <button id="clearConsole" class="px-3 py-1 text-xs bg-red-600 text-white rounded font-mono hover:bg-red-700">CLEAR</button>
                            <button id="refreshConsole" class="px-3 py-1 text-xs bg-blue-600 text-white rounded font-mono hover:bg-blue-700">REFRESH</button>
                        </div>
                    </div>
                </div>

                <!-- Terminal Console -->
                <div class="bg-black rounded-b-lg border-2 border-gray-800" style="height: 500px;">
                    <div class="p-4 h-full overflow-y-auto">
                        <div id="consoleOutput" class="font-mono text-sm space-y-1">
                            <!-- Console output will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Console Status -->
                <div class="mt-2 p-2 bg-gray-100 rounded text-xs text-gray-600 font-mono text-center">
                    <span id="consoleStatus">Ready - Showing all system logs</span>
                </div>
            </div>

            <!-- Settings Tab Content -->
            <div id="settingsContent" class="hidden">
                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-2">System Configuration</h2>
                    <p class="text-gray-600 text-sm">Configure API keys, system settings, and security preferences</p>
                </div>
                <!-- API Configuration -->
                <form id="settingsForm">
                <div class="mb-8 p-6 bg-white rounded-lg border">
                    <h3 class="text-lg font-semibold mb-4 text-gray-800">
                        <i class="fas fa-key text-blue-500 mr-2"></i>API Configuration
                    </h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- JAP API Settings -->
                        <div class="space-y-4">
                            <h4 class="font-medium text-gray-700">JAP (Social Media Services)</h4>
                            <div>
                                <label for="japApiKey" class="block text-sm font-medium text-gray-600 mb-1">API Key</label>
                                <div class="relative">
                                    <input type="password" id="japApiKey" 
                                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                           placeholder="Enter JAP API Key">
                                    <button type="button" id="toggleJapKey" class="absolute right-2 top-2 text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- RSS.app API Settings -->
                        <div class="space-y-4">
                            <h4 class="font-medium text-gray-700">RSS.app (Feed Monitoring)</h4>
                            <div>
                                <label for="rssApiKey" class="block text-sm font-medium text-gray-600 mb-1">API Key</label>
                                <div class="relative">
                                    <input type="password" id="rssApiKey" 
                                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                           placeholder="Enter RSS API Key">
                                    <button type="button" id="toggleRssKey" class="absolute right-2 top-2 text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label for="rssApiSecret" class="block text-sm font-medium text-gray-600 mb-1">API Secret</label>
                                <div class="relative">
                                    <input type="password" id="rssApiSecret" 
                                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                           placeholder="Enter RSS API Secret">
                                    <button type="button" id="toggleRssSecret" class="absolute right-2 top-2 text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- System Configuration -->
                <div class="mb-8 p-6 bg-white rounded-lg border">
                    <h3 class="text-lg font-semibold mb-4 text-gray-800">
                        <i class="fas fa-cogs text-green-500 mr-2"></i>System Configuration
                    </h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Polling Settings -->
                        <div class="space-y-4">
                            <h4 class="font-medium text-gray-700">RSS Polling</h4>
                            <div>
                                <label for="pollingInterval" class="block text-sm font-medium text-gray-600 mb-1">Polling Interval (minutes)</label>
                                <select id="pollingInterval" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="5">5 minutes</option>
                                    <option value="10">10 minutes</option>
                                    <option value="15" selected>15 minutes (recommended)</option>
                                    <option value="30">30 minutes</option>
                                    <option value="60">1 hour</option>
                                </select>
                                <p class="text-xs text-gray-500 mt-1">RSS.app refreshes every 15 minutes, so shorter intervals may not find new posts</p>
                            </div>
                        </div>

                        <!-- Time Zone Settings -->
                        <div class="space-y-4">
                            <h4 class="font-medium text-gray-700">Time Zone</h4>
                            <div>
                                <label for="timeZone" class="block text-sm font-medium text-gray-600 mb-1">System Time Zone</label>
                                <select id="timeZone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="UTC">UTC (Default)</option>
                                    <option value="America/New_York">Eastern Time (US)</option>
                                    <option value="America/Chicago">Central Time (US)</option>
                                    <option value="America/Denver">Mountain Time (US)</option>
                                    <option value="America/Los_Angeles">Pacific Time (US)</option>
                                    <option value="Europe/London">London</option>
                                    <option value="Europe/Paris">Paris/Berlin</option>
                                    <option value="Asia/Jerusalem">Israel</option>
                                    <option value="Asia/Tokyo">Tokyo</option>
                                    <option value="Australia/Sydney">Sydney</option>
                                </select>
                                <p class="text-xs text-gray-500 mt-1">Affects log timestamps and scheduling</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Password Management -->
                <div class="mb-8 p-6 bg-white rounded-lg border">
                    <h3 class="text-lg font-semibold mb-4 text-gray-800">
                        <i class="fas fa-shield-alt text-red-500 mr-2"></i>Security Settings
                    </h3>
                    
                    <div class="max-w-md">
                        <h4 class="font-medium text-gray-700 mb-4">Change Password</h4>
                        <div class="space-y-4" id="passwordChangeForm">
                            <div>
                                <label for="currentPassword" class="block text-sm font-medium text-gray-600 mb-1">Current Password</label>
                                <input type="password" id="currentPassword" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                       placeholder="Enter current password">
                            </div>
                            
                            <div>
                                <label for="newPassword" class="block text-sm font-medium text-gray-600 mb-1">New Password</label>
                                <input type="password" id="newPassword" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                       placeholder="Enter new password (min 6 characters)">
                            </div>
                            
                            <div>
                                <label for="confirmPassword" class="block text-sm font-medium text-gray-600 mb-1">Confirm New Password</label>
                                <input type="password" id="confirmPassword" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                       placeholder="Confirm new password">
                            </div>
                            
                            <button type="button" onclick="changePassword()" 
                                    class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-key mr-2"></i>Change Password
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Save Settings -->
                <div class="flex justify-between items-center">
                    <div class="text-sm text-gray-600">
                        <i class="fas fa-info-circle mr-1"></i>
                        Changes require application restart to take full effect
                    </div>
                    <div class="flex gap-3">
                        <button type="button" id="testApiKeys" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-vial mr-2"></i>Test APIs
                        </button>
                        <button type="button" id="saveSettings" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-save mr-2"></i>Save Settings
                        </button>
                    </div>
                </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h2 id="modalTitle" class="text-xl font-bold text-gray-800">Add Account</h2>
                <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form id="accountForm">
                <input type="hidden" id="accountId">
                
                <div class="mb-4">
                    <label for="platform" class="block text-sm font-medium text-gray-700 mb-2">Platform</label>
                    <select id="platform" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select Platform</option>
                        <option value="Instagram">Instagram</option>
                        <option value="Facebook">Facebook</option>
                        <option value="X">X</option>
                        <option value="TikTok">TikTok</option>
                    </select>
                </div>

                <div class="mb-4">
                    <label for="username" class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="username" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="@username">
                </div>

                <div class="mb-4">
                    <label for="displayName" class="block text-sm font-medium text-gray-700 mb-2">Display Name</label>
                    <input type="text" id="displayName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Display Name">
                </div>

                <div class="mb-6">
                    <label for="url" class="block text-sm font-medium text-gray-700 mb-2">Profile URL</label>
                    <input type="url" id="url" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://...">
                </div>

                <div class="flex gap-3">
                    <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md transition-colors">
                        Save Account
                    </button>
                    <button type="button" id="cancelBtn" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Action Configuration Modal -->
    <div id="actionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 id="actionModalTitle" class="text-xl font-bold text-gray-800">Configure New Post Triggers</h2>
                <button id="closeActionModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div id="actionModalContent">
                <!-- Account Info -->
                <div id="actionAccountInfo" class="mb-6 p-4 bg-gray-50 rounded-lg">
                    <!-- Will be populated with account details -->
                </div>

                <!-- JAP Balance -->
                <div id="japBalance" class="mb-6 p-4 bg-blue-50 rounded-lg">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-wallet text-blue-600"></i>
                        <span class="font-medium">JAP Balance: </span>
                        <span id="balanceAmount" class="text-blue-600 font-bold">Loading...</span>
                    </div>
                </div>

                <!-- Existing Actions -->
                <div id="existingActions" class="mb-6">
                    <h3 class="text-lg font-semibold mb-3">Configured Actions</h3>
                    <div id="actionsList" class="space-y-2">
                        <!-- Actions will be loaded here -->
                    </div>
                </div>

                <!-- Add New Action -->
                <div id="newActionForm" class="border-t pt-6">
                    <h3 class="text-lg font-semibold mb-4">Add New Action</h3>
                    
                    <form id="actionConfigForm">
                        <input type="hidden" id="actionAccountId">
                        
                        <div class="mb-4">
                            <label for="actionType" class="block text-sm font-medium text-gray-700 mb-2">Action Type</label>
                            <select id="actionType" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select Action Type</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <label for="japService" class="block text-sm font-medium text-gray-700 mb-2">
                                Service
                                <span class="text-xs text-gray-500 ml-2">(Type service ID or search by name)</span>
                            </label>
                            <div class="relative">
                                <input type="text" id="serviceSearch" 
                                       placeholder="Type service ID (e.g. 1234) or search by name..." 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <select id="japService" required class="hidden w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">Select Service</option>
                                </select>
                                <div id="serviceDropdown" class="absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto hidden">
                                    <!-- Filtered services will appear here -->
                                </div>
                            </div>
                        </div>

                        <div id="serviceDetails" class="mb-4 p-3 bg-yellow-50 rounded border hidden">
                            <!-- Service details will be shown here -->
                        </div>

                        <!-- Dynamic Parameters -->
                        <div id="dynamicParameters" class="space-y-4 mb-6">
                            <!-- Parameters will be generated dynamically -->
                        </div>

                        <div class="flex gap-3">
                            <button type="submit" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md transition-colors">
                                <i class="fas fa-rss mr-2"></i>Configure RSS Trigger
                            </button>
                            <button type="button" id="cancelActionBtn" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Execute Modal -->
    <div id="quickExecuteModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-gray-800">
                    <i class="fas fa-bolt text-orange-500 mr-2"></i>
                    Quick Execute Action
                </h2>
                <button id="closeQuickExecuteModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- JAP Balance -->
            <div class="mb-6 p-4 bg-blue-50 rounded-lg">
                <div class="flex items-center gap-2">
                    <i class="fas fa-wallet text-blue-600"></i>
                    <span class="font-medium">JAP Balance: </span>
                    <span id="quickBalanceAmount" class="text-blue-600 font-bold">Loading...</span>
                </div>
            </div>

            <form id="quickExecuteForm">
                <!-- Platform Selection -->
                <div class="mb-4">
                    <label for="quickPlatform" class="block text-sm font-medium text-gray-700 mb-2">Platform</label>
                    <select id="quickPlatform" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select Platform</option>
                        <option value="Instagram">Instagram</option>
                        <option value="Facebook">Facebook</option>
                        <option value="X">X (Twitter)</option>
                        <option value="TikTok">TikTok</option>
                        <option value="YouTube">YouTube</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <!-- Action Type Selection -->
                <div class="mb-4">
                    <label for="quickActionType" class="block text-sm font-medium text-gray-700 mb-2">Action Type</label>
                    <select id="quickActionType" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">First select a platform</option>
                    </select>
                </div>

                <!-- Service Selection -->
                <div class="mb-4">
                    <label for="quickJapService" class="block text-sm font-medium text-gray-700 mb-2">
                        Service
                        <span class="text-xs text-gray-500 ml-2">(Type service ID or search by name)</span>
                    </label>
                    <div class="relative">
                        <input type="text" id="quickServiceSearch" 
                               placeholder="First select action type..." 
                               disabled
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100">
                        <select id="quickJapService" required class="hidden">
                            <option value="">Select Service</option>
                        </select>
                        <div id="quickServiceDropdown" class="absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto hidden">
                            <!-- Filtered services will appear here -->
                        </div>
                    </div>
                </div>

                <div id="quickServiceDetails" class="mb-4 p-3 bg-yellow-50 rounded border hidden">
                    <!-- Service details will be shown here -->
                </div>

                <!-- Target URL -->
                <div class="mb-4">
                    <label for="quickTargetUrl" class="block text-sm font-medium text-gray-700 mb-2">
                        Target URL
                        <span class="text-xs text-gray-500 ml-2" id="urlHelpText">Select a service first</span>
                    </label>
                    <input type="url" id="quickTargetUrl" required 
                           placeholder="Enter the target URL..."
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Dynamic Parameters -->
                <div id="quickDynamicParameters" class="space-y-4 mb-6">
                    <!-- Parameters will be generated dynamically -->
                </div>

                <div class="flex gap-3">
                    <button type="submit" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-md transition-colors">
                        <i class="fas fa-bolt mr-2"></i>Execute Now
                    </button>
                    <button type="button" id="cancelQuickExecuteBtn" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>